# Python venv

`venv` (от "virtual environment" - виртуальное окружение) — это встроенный модуль Python, который позволяет создавать изолированные среды для ваших проектов. Это очень полезно, так как помогает избежать конфликтов зависимостей между различными проектами и поддерживает чистоту вашей системной установки Python.

Представьте, что у вас есть два проекта, использующих разные версии одной и той же библиотеки (например, Django 4.0 и Django 4.1). Без виртуальных окружений установка одной версии может сломать другой проект. `venv` решает эту проблему, создавая отдельный "контейнер" для каждого проекта, со своим собственным интерпретатором Python и набором установленных пакетов.

### Зачем использовать `venv`?

- **Изоляция зависимостей:** Каждый проект может иметь свои собственные версии библиотек, не влияя на другие проекты или глобальную установку Python.
- **Воспроизводимость:** Вы можете легко воспроизвести среду проекта на другой машине, используя файл `requirements.txt`.
- **Чистота системной установки:** Ваша основная установка Python остается чистой от специфических для проекта пакетов.
- **Портативность:** Проекты становятся более портативными, так как все их зависимости находятся в одном месте.

Ниже описано, как использовать `venv`:

##### 1. Создание виртуального окружения

Чтобы создать виртуальное окружение, откройте терминал (командную строку) и перейдите в корневую директорию вашего проекта. Затем выполните следующую команду:

```bash
python -m venv myenv
```

- `python`: Вызывает интерпретатор Python.
- `-m venv`: Указывает Python запустить модуль `venv`.
- `myenv`: Это имя вашего виртуального окружения. Вы можете назвать его как угодно, но часто используется `venv` или `.venv`.

Эта команда создаст папку с именем `myenv` (или выбранным вами именем) в текущей директории. Эта папка будет содержать копию интерпретатора Python, а также каталоги для хранения установленных пакетов.

#### 2. Активация виртуального окружения

После создания виртуального окружения его необходимо активировать. Активация изменяет переменную `PATH` вашей оболочки, чтобы команды `python` и `pip` указывали на интерпретатор и пакеты внутри вашего виртуального окружения, а не на глобальные.

##### Для Windows:

В командной строке (CMD):

```cmd
myenv\Scripts\activate
```

В PowerShell:

```powershell
.\myenv\Scripts\Activate.ps1
```

##### Для Linux и macOS:

```bash
source myenv/bin/activate
```

После активации вы заметите, что имя вашего виртуального окружения (например, `(myenv)`) появится в начале строки приглашения вашего терминала. Это указывает на то, что виртуальное окружение активно. [[10]](https://www.geeksforgeeks.org/python/creating-python-virtual-environment-windows-linux/)

#### 3. Установка пакетов в виртуальное окружение

Когда виртуальное окружение активировано, вы можете устанавливать пакеты с помощью `pip`. Все установленные пакеты будут помещены в это конкретное виртуальное окружение и не будут влиять на вашу глобальную установку Python или другие виртуальные окружения.

Например, для установки библиотеки `requests`:

````bash
pip install requests
```


Вы также можете обновить `pip` внутри виртуального окружения:
```bash
python -m pip install --upgrade pip
````

##### Использование `requirements.txt`:

Хорошей практикой является создание файла `requirements.txt`, в котором перечислены все зависимости вашего проекта. Вы можете сгенерировать этот файл, находясь в активном виртуальном окружении:

```bash
pip freeze > requirements.txt
```

Чтобы установить все зависимости из `requirements.txt` в новом виртуальном окружении:

```bash
pip install -r requirements.txt
```

#### 4. Деактивация виртуального окружения

Когда вы закончили работу над проектом или хотите переключиться на другой, вы можете деактивировать текущее виртуальное окружение.

Просто введите в терминале:

```bash
deactivate
```

Строка приглашения вашего терминала вернется в обычное состояние, указывая, что виртуальное окружение больше не активно.

#### 5. Удаление виртуального окружения

Виртуальные окружения считаются "одноразовыми". Если вам больше не нужно виртуальное окружение, вы можете просто удалить его папку. Нет специальной команды `venv` для удаления.

Убедитесь, что виртуальное окружение деактивировано, прежде чем удалять его.

##### Для Windows:

```cmd
rmdir /s /q myenv
```

##### Для Linux и macOS:

```bash
rm -rf myenv
```

Замените `myenv` на фактическое имя папки вашего виртуального окружения.

**Важное замечание:** Никогда не добавляйте папку виртуального окружения в систему контроля версий (например, Git). Вместо этого используйте файл `requirements.txt` для управления зависимостями.
