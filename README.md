# Lyrata

**Lyrata** — проект, позволяющий синхронизировать эмоции при чтении текста и прослушивании музыки, причём выбор и того, и того лежит на стороне пользователя! Подробнее [ниже](#lyrata-1) или в [телеграм канале по ссылке](https://t.me/LyrataAI).

## Возможности

- Чтение текста, представленного в минималистичном стиле.
- Музыка пользователя, подстраивающаяся под настроение текущего абзаца / предложения.
- Вставка любого художественного текста на русском языке.

## Структура проекта

```
docs/                       # Теория необходимая для поддержки/разработки этого приложения, а также описание самого проекта
lyrata-electron-app/        # Фронтенд приложения - React-проект с библиотекой "Electron"
lyrata-python-app/          # Бэкенд приложения - Python коды для обработки текста, аудио, а также HTTP-запросов
README.md
.gitignore
```

## Подготовка к разработке

1.  **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/AlbionVisual/Lyrata.git
    cd Lyrata
    ```

    Дальнейшие команды можно запускать в двух консолях для удобства

2.  **Установите зависимости для React и Python:**

    #### Для бэкенда команды из папки `lyrata-python-app`:

    ```powershell
    python -m venv venv
    venv\Scripts\activate
    pip install -r requirements.txt
    ```

    #### Для фронтенда из `lyrata-electron-app`:

    ```powershell
    npm install
    ```

3.  **Стандартный запуск Electron и Python приложений:**

    #### Для бэкенда:

    ```powershell
    venv\Scripts\activate
    python app.py
    ```

    #### Для фронтэнда:

    ```powershell
    npm run electron-dev
    ```

## Дальнейшая работа

В папке docs представлена вся необходимая информация для работы с данным приложением. Читайте теорию, коды и разрабатывайте новые технологии.

## Технологии

- Python 3.10+
  - Librosa
  - Transformers
  - Torch
  - Numpy
- React
  - Electron

## Lyrata

### Как это работает?

**Первая основная функция приложения:** _чтение текста, представленного в минималистичном стиле_. Абзац или предложение будет подсвечиваться чёрным, когда пользователь его читает, или еле заметным серым, если эта часть текста сейчас не читается. Чёрный текст всегда по центру. Чтобы пользователю переключить абзац / предложение на следующий / предыдущий, используются соответствующие кнопки.

**Вторая основная функция:** _музыка пользователя, подстраивающаяся под настроение текущего абзаца / предложения_. Музыка выбирается из рекомендаций / плейлиста какого-то приложения (Яндекс музыки, например) или просто скачанной на устройство. Приложение само подбирает относительно спокойные или бодрые части песен под разные абзацы / предложения и переключает их при нажатии на кнопку (при необходимости).

**Третья функция:** _вставка любого художественного текста_. Пользователь сам может выбрать, что читать, хоть своё сочинение. Это позволяют сделать современные модели, классифицирующие текста.

### Какую проблему решает этот проект?

Вспомните людей, которые каждый день оставляют время на то, чтобы почитать какую-то книгу, когда обычный человек предпочёл бы весело провести время перед телевизором. В такие моменты появляется зависть и желание стать таким же. И спустя долгие дни вы всё же нашли время сесть за книгу, которую так давно хотели прочитать. Абзац за абзацем вы еле-еле удерживаете свою увлечённость за текстом, но тут кто-то что-то разбил на кухне вместе с вашим шатким вниманием. Недолго думая вы в панике начинаете пытаться восстановить увлечённость, но теперь вам мешает даже шум машин на улице! С последней надеждой вы включаете Яндекс музыку в наушниках, а через несколько песен фильтруете волну по трекам без слов. И вроде бы всё стало стабильно... кроме главного героя. Вам почему-то весело, а он страдает. Вы с яростью бросаете книгу, идёте на диван смотреть телевизор и ставите новое мнение о читающих людях: они занимаются непостижимым делом!

### Какова будет структура приложения?

#### Текст

Основной функционал крутится вокруг вставленного пользователем текста. Он делится на переключаемые части, потом анализируется нейросетью на эмоциональную составляющую, а потом становится главным актёром на экране.

#### Музыка

Это уже главный актёр в наушниках. Музыка, также вставленная пользователем, проходит более сложный анализ на эмоциональность и разбивается на более мелкие части. Во время работы приложения они будут включаться в порядке зависящем от эмоции части текста.

#### Анализатор текста

Текст будет анализироваться по частям... как? Предстоит узнать. Но для этого будет использоваться предобученная модель, в основе которой будет лежать RuBERT классификатор текстов. Модель должна будет высказываться какие эмоции с каким шансом есть в данной части текста, а затем алгоритм выставит, какая музыка может быть включена на фоне во время чтения той или иной части текста.

#### Анализатор музыки

На популярных языках программирования уже есть хорошо оптимизированные аудио библиотеки, позволяющие анализировать звуковые файлы или музыку со всех сторон. При помощи них будут построены алгоритм разделения музыкального произведения на части, а также алгоритм классификации части, чтобы её можно было сопоставить с эмоцией в тексте. Классификация должна быть максимально точной, поэтому она будет далеко не любой.

#### Механизм сопоставления

Также есть часть, которая всё выше перечисленное объединяет. Каждая часть текста будет иметь свой тег, описывающий эмоциональную окраску. И если от одного куска текста к другому она не меняется, то и музыка будет оставаться соответствующей. А если меняется, то и музыка будет переключаться как минимум на более громкую / тихую, а как максимум по эмоции. Ещё здесь учитывается скорость чтения пользователя.

#### Пользовательский интерфейс

Важная визуальная часть, чтобы пользователь просто мог общаться с этой системой. Сюда входят отображение текста, меню, настроек...

### Что лучше... прочесть книгу или просмотреть сериал?

Кино демонстрирует информацию быстрее и в более сжатом формате. Книги в свою очередь тратят одно и то же время по-очереди на действие, разговоры, описание окружения и эмоций, причём используя только текст, заставляя работать ваше воображение. Но и тот, и другой способы одинаково демонстрируют эмоциональную составляющую описываемой ситуации.

Кино сейчас явно популярнее, а всё из-за простоты восприятия... а также... из-за подходящего музыкального сопровождения. Вспомните легендарное кино с музыкой Ханса Циммера: "Интерстеллар", пересъёмка "Король лев", "Кунг фу панда" и другие. Музыка при чтении книг не совпадает с эмоциями строк, а больше путает чувства читателя, а при отсутствии песен может появится отвлекающий фактор окружающей среды, который будет действовать сильнее, чем в кино.

Lyrata поможет вам вернуться к книгам, путём добавления музыки синхронизированной с текстом. Совсем скоро можно будет читать в удовольствие что угодно!
